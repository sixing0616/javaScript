<html>
<head>
  <title>Evernote Export</title>
  <basefont face="楷体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: 楷体;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="2267"/>
<h1>01 万物皆对象</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#1C3387"><b>1、万物皆对象 </b></font><div><font color="#E30000">   * function是一个函数</font></div><div><font color="#E30000">   * function是一个对象，可以利用该对象的constructor属性找到该对象的构造函数</font></div><div><font color="#E30000">   * 一个对象（这个对象必须有值，不能是null，undefined）可以动态的添加一个属性</font></div><div><font color="#E30000">   * 一个function同时又是一个构造器函数</font></div><div><font color="#E30000">   * 任何一个对象有可能成为任何一个对象的属性<br></font><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="text-align: -webkit-auto;"><font color="#1C3387"><b>2、范例一</b></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">/**</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * function</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 在js中，一切皆对象</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 在js中，对象有一个属性为constructor</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 在js中，凡是函数都是构造器对</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 在js中，一个对象可以动态的添加任何一个属性</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> */</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//函数的三种表示方式</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">function a(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">/**</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * a.constructor是一个对象,为Function</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 因为a是通过new Function的形式产生的，所以a的构造器就是Function</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> */</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">alert(a.constructor);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">var aa = function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      alert(&quot;aa&quot;);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">alert(aa.constructor);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//给a对象添加了一个属性为b,值为5</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">a.b = 5;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">alert(a.b);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//给a对象添加了一个属性为bb，bb为对象，bb的值为var a = function(){}</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">a.bb = aa;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">a.bb();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">var aaa = new Function(&quot;a1&quot;,&quot;a2&quot;,&quot;var c = a1 + a2;alert(c)&quot;);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">aaa(1,2);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="text-align: -webkit-auto;"><font color="#1C3387"><b>3、范例二：</b></font></div><div align="left" style="text-align: -webkit-auto;"><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">function Person(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">function P(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      alert(&quot;p&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">function A(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">function B(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">Person.a = P;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">Person.a.b = A;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">Person.a.b.c = B;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">Person.a.b.c.d = P;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">Person.a.b.c.d();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">/**</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">  * Person.bb;</span><span style="font-size:10pt">bb</span><span style="font-size:10pt">的值为undefined</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">  * bb.a = P;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">  */</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">//Person.bb.a = P;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">//Person.bb.a();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">/**</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">  * 在</span><span style="font-size:10pt">js</span><span style="font-size:10pt">中，任何一个对象都有可能成为任何一个对象的属性</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">  */</span></font></div></div></div></div>
</div>
<hr>
<a name="2268"/>
<h1>02 原型</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">/**</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"> * 在一个对象中有一个属性：prototype</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"> */</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">function Person(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">function Student(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">Person.prototype;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">Person.prototype.name = function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      alert(&quot;name&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">Person.prototype.age = 5;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">Person.prototype[&quot;sex&quot;] = &quot;male&quot;;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">Person.prototype['student'] = Student;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">window.onload = function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      Person.prototype;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">var p = new Person();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">alert(p.age);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">//alert(Person.age);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">//undefined</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><br></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">function SupPerson(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">/**</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"> * 让SupPerson创建出来的对象拥有person原型中的内容</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"> */</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">SupPerson.prototype = p;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">//SupPerson.prototype = Person.prototype;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">var sp = new SupPerson();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">alert(sp.age);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><img src="JavaScript补充_files/Image.png" type="image/png" style="cursor: default;cursor: default;"/><br><img src="JavaScript补充_files/Image [1].png" type="image/png" style="cursor: default;cursor: default;"/></div><div align="left"><br></div></div>
</div>
<hr>
<a name="2271"/>
<h1>03 extend</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left"><div><b style="text-align: -webkit-auto;"><font color="#1C3387">1、范例一</font></b></div></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">function createClass(jsonObj){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      /**</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       * 任意的类为F</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       */</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      function F(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      /**</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       * 动态的遍历json对象的key和value的值</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       */</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      for(var name in jsonObj){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            F.prototype[name] = jsonObj[name];</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      return F;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">var Person = createClass({</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      getName:function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            alert(&quot;name&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      },</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      getId:function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            alert(&quot;id&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">});</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">var p = new Person();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">p.getName();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">p.getId();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="text-align: -webkit-auto;"><font color="#1C3387"><b>2、范例二</b></font></div><div align="left"><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">/**</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"> * 当该函数中有一个参数的情况下创建类</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"> * 当该函数中有两个参数的情况下，第一个参数是基类，第二个参数就是在基类的基础上添加的内容</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"> */</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">function extend(obj,prop){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      function F(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      if(typeof obj == &quot;object&quot;){//obj是一个json格式的对象</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            for(var name in obj){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  F.prototype[name] = obj[name];</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }else{//obj是一个函数</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            F.prototype = obj.prototype;//完成了基类的赋值</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            for(var name in prop){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  F.prototype[name] = prop[name];</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }     </span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      return F;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">var Person = extend({</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      name:5,</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      id:6</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">});</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">var SurPerson = extend(Person,{</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      sex:'aa'</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">});</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">var sp = new SurPerson();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">alert(sp.name);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">alert(sp.id);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">alert(sp.sex);</span></font></div></div></div>
</div>
<hr>
<a name="2272"/>
<h1>04 event</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">$().ready(function(){</span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      for(var i = 0; i</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">4; i++){</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            /**</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">             * jquery的事件是可以叠加的</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">             */</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            //$(&quot;#aa&quot;).click(function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            //    alert(&quot;aa&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            //});</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            /**</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">             * 先解绑再绑定</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">             */</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            $(&quot;#aa&quot;).unbind(&quot;click&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            $(&quot;#aa&quot;).bind(&quot;click&quot;,function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  alert(&quot;aaa&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  $(this).trigger(&quot;点我&quot;,['aa','bb']);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            });</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      /**</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       * 1、声明事件，把该事件绑定在一个dom对象上</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       * 2、找一个事件的触发方式，触发事件</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       * 3、传递参数</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       */</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      $(&quot;#aa&quot;).unbind(&quot;点我&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      $(&quot;#aa&quot;).bind(&quot;点我&quot;,function(event,a,b){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            alert(&quot;点我&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            alert(a);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            alert(b);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      });</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">});</span></font></div></div>
</div>
<hr>
<a name="2273"/>
<h1>05 callback</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left" style="text-align: -webkit-auto;"><div><b style="color: rgb(28, 51, 135);">1、范例一</b></div></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">var ajaxObj = {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      xmlhttprequest:'',</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      getXMLHttpRequest:function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            var xmlHttp;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            try{</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  xmlHttp = new XMLHttpRequest();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            }catch(e){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  try{</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                        xmlHttp = new ActiveObject(&quot;Msxml2.XMLHTTP&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  }catch(e){                    </span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            return xmlHttp;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      },</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      post:function(ajaxJSON){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            ajaxObj.xmlhttprequest = ajaxObj.getXMLHttpRequest();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            ajaxObj.xmlhttprequest.onreadyStatechange = function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  if(ajaxObj.xmlhttprequest.status == 4){//相应完毕</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                        if(ajaxObj.xmlhttprequest.status==200){//成功响应</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                              ajaxJSON.callback(ajaxObj.xmlhttprequest.responseText);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                        }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            ajaxObj.xmlhttprequest.open(ajaxJSON.method,ajaxJSON.url,true);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            ajaxObj.xmlhttprequest.send(ajaxJSON.data);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">};</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">window.onload = function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      document.getElementById(&quot;ok&quot;).onclick = function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            ajaxObj.post({</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  method:&quot;post&quot;,</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  url:'../HelloWorldServlet',</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  data:'a=a',</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  callback:function(data){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                        alert(data);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            });</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><b style="color: rgb(28, 51, 135); text-align: -webkit-auto;">2、范例二</b></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">$().ready(function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      $(&quot;select&quot;).unbind(&quot;me&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      $(&quot;select&quot;).bind(&quot;me&quot;,function(event,meJSON){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            alert(meJSON.value);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            meJSON.callback();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      });</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      $(&quot;select&quot;).unbind(&quot;change&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      $(&quot;select&quot;).bind(&quot;change&quot;,function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            $(this).trigger(&quot;me&quot;,{</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  value:$(this).val(),</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  callback:function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                        alert(&quot;aaaa&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            });</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      });</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">});</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><b style="color: rgb(28, 51, 135); text-align: -webkit-auto;">3、范例三</b></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">/**</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 在js中使用this</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * js中的this具有多态性</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> */</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">function Person(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      alert(this);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Person();//window.Person();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//this代表student</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">function Student(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Student.s = Person;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Student.s();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//this代表json对象</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">var jsonObj = {</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      getPerson:Person</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">};</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">jsonObj.getPerson();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">/**</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 利用call方法和apply方法改变this的指向</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> */</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">function SuperStudent(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Person.call(Student);//Student.person();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">Person.apply(SuperStudent);//SuperStudent.Person();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">/**</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 如果有回调函数的情况</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * $().ready(function(){this.a = 5;});</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 回调函数中的this，调用者来确定</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> */</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">function testCallback(callback){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      callback.call(this);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      callback.apply(Person);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">testCallback(function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      alert(this);//该this为回调函数中的this，为window</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">});</span></font></div></div></div></div>
</div>
<hr>
<a name="2274"/>
<h1>06 闭包</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#1C3387"><b>1、范例一</b></font><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">/**</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">  * 闭包</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">  * 第二个括号是实参</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">  * 第一个参数为一个函数，函数中的参数为形参，在匿名函数中的所有的方法都可以使用</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">  */</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">(function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      function Student(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">})();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//Student();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">//Student is not defined</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">(function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      alert(&quot;aaa&quot;);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">})();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">(function(a){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      alert(a);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">})(5);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">/**</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 下面的写法的好处</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 1、可以让一些函数私有化</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 2、可以让一些函数公开化</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> * 3、在匿名函数中声明的属性，在外部访问不到</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"> */</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">(function(window){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      var a = 5;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      function A(){//私有的</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            B();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            return {//全部都是公开的方法</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">                  C:C,</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">                  D:D</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      function B(){//私有的</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      function C(){//公开的</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      function D(){//公开的</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      window.A = A;//通过该方式可以让一个函数成为一个公开的函数</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">})(window);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">var json = window.A();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">json.C();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">json.D();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left" style="text-align: -webkit-auto;"><font color="#1C3387"><b>2、jQuery的内核</b></font></div><div align="left" style="text-align: -webkit-auto;"><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">(function(window,undefined){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      //这就是jQuery的原型</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      var jQuery = function(selector,context){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            return new jQuery.fn.init(selector,context);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      //利用jQuery选择器产生的对象就是jQuery产生的对象，所以利用选择器产生的对象才拥有了jQuery中的prototype中的内容</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      jQuery.fn = jQuery.prototype = {</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            ready:function(){},</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            each:function(){},</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            size:function(){}</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      //window.jQuery.prototype = window.jQuery.fn = window.$.fn = jQuery.prototype = $.prototype = $.fn</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      window.jQuery = window.$ = jQuery;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      把加在jQuery对象上的方法或者加jQuery.prototype上的方法称为jQuery的插件开发</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      jQuery.a = function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      jQuery.prototype.b = function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2">      //总结：如果该方法与页面上的元素没有关系，该方法就是jQuery中全局的插件方法</font></div><div align="left"><font color="#6A0081" face="Courier New" size="2">      //如果该方法与页面上的元素有关系，则该方法就必须加在jQuery的prototype上</font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">})(window);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><br></font></div><div align="left" style="text-align: -webkit-auto;"><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">(function($){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      $.a = function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            alert(&quot;aaa&quot;);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      $.fn.b = function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            alert(&quot;bbb&quot;);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">})($);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">$().ready(function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      $.a();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      $(&quot;body&quot;).b();</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">});</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="text-align: -webkit-auto;"><font color="#1C3387"><b>3、合并参数<br></b></font><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">jQuery.extend([deep],target,object1,[objectN]) 返回值：Object</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">deep(可选) Object：如果设置为true，则递归合并。</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">target Object：待修改对象。</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">object1 Object：待合并到第一个对象的对象。</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">objectN(可选) Object：待合并到第一个对象的对象。</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">合并setting和options，修改并返回settings。</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">var settings = {validate:false,limit:5,name:'foo'};</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">var options = {validate:true,name:'bar'};</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">jQuery.extend(settings,options);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">结果：settings = {validate:true,limit:5,name:'bar'}</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">合并defaults和options，不修改defaults。</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">var empty = {};</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">var defaults = {validate:false,limit:5,name:'foo'};</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">var options = {validate:true,name:'bar'};</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">var settings = jQuery.extend(empty,defaults,options);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">结果：settings == {validate,true,limit:5,name:'bar'}</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">empty == {validate:true,limit:5,name:'bar'}</span></font></div></div></div></div></div>
</div>
<hr>
<a name="2275"/>
<h1>07 $.post与$.ajax</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left"><div><b style="color: rgb(28, 51, 135); text-align: -webkit-auto;">1、$.post与$.ajax</b></div></div><div align="left"><font color="#E30000">   * 页面上的js端要传递参数到后台</font></div><div align="left"><font color="#E30000">   json格式</font></div><div align="left"><font color="#E30000">      简单json格式</font></div><div align="left"><font color="#E30000">      {</font></div><div align="left"><font color="#E30000">            key:value(基本类型)</font></div><div align="left"><font color="#E30000">      }</font></div><div align="left"><font color="#E30000">      复杂json格式</font></div><div align="left"><font color="#E30000">      {</font></div><div align="left"><font color="#E30000">            key:value是一个对象</font></div><div align="left"><font color="#E30000">      }</font></div><div align="left"><font color="#E30000">   * $.post只能在成功的时候使用，</font><span style="color: rgb(227, 0, 0);">$.post只能传递简单格式的数据</span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left" style="text-align: -webkit-auto;"><font color="#1C3387"><b>2、代码</b></font></div><div align="left"><img src="JavaScript补充_files/Image [2].png" type="image/png" height="65" style="cursor: default;cursor: default;cursor: default;cursor: default;" width="501"/></div><div align="left"><font color="#E30000">struts-plugin.xml</font></div><div align="left"><img src="JavaScript补充_files/Image [3].png" type="image/png" height="212" style="cursor: default;cursor: default;cursor: default;cursor: default;" width="537"/></div><div align="left"><br></div><div align="left"><font color="#E30000">AjaxAction.java</font> <font color="#6A0081"> </font></div><div align="left"><div align="left"><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">public class AjaxAction extends ActionSupport{</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      private Long[] ss;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public Long[] getSs(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return ss;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public void setSs(Long[] ss){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            this.ss = ss;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public String ajax(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return SUCCESS;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><font color="#E30000">struts.xml</font></div><div style="font-size: 13px;"><font color="#8600A4">&lt;!--配置文件改了以后不用重新启动--&gt;</font></div></div><div align="left"><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">package</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;ajax&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">namespace</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;/&quot;</i></span></font><font face="Courier New" size="2"> </font><font face="Courier New" size="2"><span style="font-size: 10pt;">extends</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> <i>&quot;json-default&quot;</i></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2">      </font><font color="#8600A4"><font face="Courier New" size="2">&lt;!--该拦截器是处理复杂格式的数据--&gt;</font></font><span style="color: rgb(134, 0, 164);"> </span></div><div align="left"><font color="#8600A4" face="Courier New" size="2">      </font><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">interceptors</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">interceptor-stack</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;ajaxStack&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">                  </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">interceptor-ref</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;defaultStack&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">interceptor-ref</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">                  </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">interceptor-ref</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;json&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">interceptor-ref</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">interceptor</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">interceptors</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">default-interceptor-ref</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;ajaxStack&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">default-interceptor-ref</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">action</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;ajaxAction_*&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">method</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;"><i>&quot;{1}&quot;</i></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">class</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;cn.itheima02.struts2.ajax.action.AjaxAction&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">            </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">result</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">type</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;json&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">result</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">action</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">package</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><br></font></div><div align="left"><div align="left"><div><font color="#E30000">ajax.js</font></div></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">$().ready(function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      $(&quot;input[type='button']&quot;).unbind(&quot;click&quot;);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      $(&quot;input[type='button']&quot;).bind(&quot;click&quot;,function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">            $.post(&quot;ajaxAction_ajax.action&quot;,{</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">                  ss:[5,6,7,8]</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">            },function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">                  alert(data);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">            });</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">      });</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">});</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div></div><div align="left"><div><font color="#E30000">testAjax.jsp </font></div></div><div align="left"><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">head</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">script</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">src</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;js/jquery-1.4.2.js&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">script</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">script</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">src</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;js/ajax.js&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">script</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">head</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">body</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">input</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">type</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;button&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">name</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;"><i>&quot;aaa&quot;</i></span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> </span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">value</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">=</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"><i>&quot;click&quot;</i></span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">/&gt;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;/</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">body</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font></font></div></div><div align="left"><font color="#010101" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><span style="color: rgb(227, 0, 0);">执行结果：</span></div><div><img src="JavaScript补充_files/Image [4].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><br></div></div></div><div align="left"><div align="left"><div><span style="color: rgb(227, 0, 0);">ajax.js</span></div></div><div align="left"><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">$().ready(function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      $(&quot;input[type='button']&quot;).unbind(&quot;click&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      $(&quot;input[type='button']&quot;).bind(&quot;click&quot;,function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            $.ajax({</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">                  url:'ajaxAction_ajax.action',</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">                  type:&quot;post&quot;,</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">                  data:&quot;{'ss':[1,2,3,4]}&quot;,//这里的格式必须使用固定形式的</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">                  success:function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">                        alert(&quot;aaaa&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">                  },</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">                  contentType:&quot;application/json&quot;,</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">                  error:function(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">                        alert(&quot;bbbb&quot;);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">                  }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            });</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      });</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">});</span></font></div></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">//如果通过$.ajax方法传入的参数名称在action的属性驱动和原型驱动中都有，那么由于action的model在栈顶，所以action的属性中值为null，原型model中有值。</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><span style="color: rgb(227, 0, 0);">执行结果：</span></div><div><img src="JavaScript补充_files/Image [5].png" type="image/png" height="177" style="cursor: default;cursor: default;cursor: default;cursor: default;" width="739"/></div><div><br></div><div><font color="#E30000">jsonToStr.js</font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">jQuery.extend({</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">   /** * @see 将javascript数据类型转换为json字符串 * @param 待转换对象,支持object,array,string,function,number,boolean,regexp * @return 返回json字符串 */</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">   toJSON: function(object) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     var type = typeof object;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     if ('object' == type) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">         if(object){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                  if (Array == object.constructor) type = 'array';</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                        else if (RegExp == object.constructor) type = 'regexp';</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">                        else type = 'object';</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">         } </span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     switch (type) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     case 'undefined':</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     case 'unknown':</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       return;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       break;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     case 'function':</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     case 'boolean':</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     case 'regexp':</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       return object.toString();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       break;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     case 'number':</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       return isFinite(object) ? object.toString() : 'null';</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       break;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     case 'string':</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       return '\'' + object.replace(/(\\|\&quot;)/g, &quot;\\$1&quot;).replace(/\n|\r|\t/g, function() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">         var a = arguments[0];</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">         return (a == '\n') ? '\\n': (a == '\r') ? '\\r': (a == '\t') ? '\\t': &quot;&quot;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       }) + '\'';</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       break;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     case 'object':</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       if (object === null) return 'null';</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       var results = [];</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       for (var property in object) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">         var value = jQuery.toJSON(object[property]);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">         if (value !== undefined) results.push(jQuery.toJSON(property) + ':' + value);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       return '{' + results.join(',') + '}';</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       break;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     case 'array':</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       var results = [];</span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">       for (var i = 0; i</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">object.length; i++) {</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">         var value = jQuery.toJSON(object[i]);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">         if (value !== undefined) results.push(value);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       return '[' + results.join(',') + ']';</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">       break;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">     }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">   }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">});</span></font></div><div align="left">  </div><div align="left"><div><span style="color: rgb(227, 0, 0);">ajax.js</span></div></div><div align="left"><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">$().ready(function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">    $(&quot;input[type='button']&quot;).</span> <span style="font-size:10pt">unbind</span><span style="font-size:10pt">(&quot;click&quot;);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">    $(&quot;input[type='button']&quot;).bind(&quot;click&quot;, function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">       </span> <span style="font-size:10pt">var</span> <span style="font-size:10pt">parameter1 = {</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            id: '1',</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">           </span> <span style="font-size:10pt">uname</span><span style="font-size:10pt">: 'itcast119',</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            arrayInt: [2, 3, 6, 8],</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            arrayList: [20, 21, 23],</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            teacher: {</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">               </span> <span style="font-size:10pt">tname</span><span style="font-size:10pt">: '</span><span style="font-size:10pt">aaa</span> <span style="font-size:10pt">',</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">               </span> <span style="font-size:10pt">responseblitity</span><span style="font-size:10pt">: '讲课是这哥们的任务',</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">               </span> <span style="font-size:10pt">strs</span><span style="font-size:10pt">: ['Hello', 'World']</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            },</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            teacherList: [{</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">               </span> <span style="font-size:10pt">tname</span><span style="font-size:10pt">: '王二麻子',</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">               </span> <span style="font-size:10pt">responseblitity</span><span style="font-size:10pt">: '</span><span style="font-size:10pt">aaaa</span> <span style="font-size:10pt">',</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">               </span> <span style="font-size:10pt">strs</span><span style="font-size:10pt">: ['</span><span style="font-size:10pt">aa</span> <span style="font-size:10pt">', '</span><span style="font-size:10pt">bb</span><span style="font-size:10pt">']</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            }, {</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">               </span> <span style="font-size:10pt">tname</span><span style="font-size:10pt">: '王二麻子的哥',</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">               </span> <span style="font-size:10pt">responseblitity</span><span style="font-size:10pt">: '</span><span style="font-size:10pt">aaaa</span> <span style="font-size:10pt">',</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">               </span> <span style="font-size:10pt">strs</span><span style="font-size:10pt">: ['</span><span style="font-size:10pt">aa</span> <span style="font-size:10pt">', '</span><span style="font-size:10pt">bb</span><span style="font-size:10pt">']</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            }]</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">        };</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            </span> <span style="font-size:10pt">var</span> <span style="font-size:10pt">para</span> <span style="font-size:10pt">= $.toJSON(parameter1);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">        $.</span> <span style="font-size:10pt">ajax</span><span style="font-size:10pt">({</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">           </span> <span style="font-size:10pt">url</span><span style="font-size:10pt">: 'ajaxAction_ajax.action',</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            type: &quot;POST&quot;,</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            data:</span> <span style="font-size:10pt">para</span><span style="font-size:10pt">,</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            success: function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">                alert(&quot;</span> <span style="font-size:10pt">aaaa</span><span style="font-size:10pt">&quot;);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            },</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            contentType: &quot;application/</span> <span style="font-size:10pt">json</span><span style="font-size:10pt">&quot;,</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            error: function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">                alert(&quot;</span> <span style="font-size:10pt">bbbb</span><span style="font-size:10pt">&quot;);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">        });</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">    });</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">});</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div align="left"><div><font color="#E30000">Teacher.java</font> <font color="#6A0081"> </font></div></div><div align="left"><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">public class Teacher {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      private String tname;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      private String responseblitity;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      private String[] strs;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public String getTname() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return tname;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public void setTname(String tname) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            this.tname = tname;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public String getResponseblitity() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return responseblitity;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public void setResponseblitity(String responseblitity) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            this.responseblitity = responseblitity;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><br></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public String[] getStrs() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return strs;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public void setStrs(String[] strs) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            this.strs = strs;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      @Override</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public String toString() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return &quot;Teacher [tname=&quot; + tname + &quot;, responseblitity=&quot;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">                        + responseblitity + &quot;, strs=&quot; + Arrays.toString(strs) + &quot;]&quot;;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div><span style="color: rgb(227, 0, 0);">User.java</span></div></div><div align="left"><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">public class User implements Serializable{</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      private String ss;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public String getSs() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            return ss;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public void setSs(String ss) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            this.ss = ss;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><u><br></u></span></font></div></div></div></div><div align="left"><div><font color="#E30000">AjaxAction.java </font><font color="#6A0081">  </font></div></div><div align="left"><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">public class AjaxAction extends ActionSupport{</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      private Integer id;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      private String uname;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><br></font></div><div align="left"><div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      private Integer[] arrayInt;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      private List</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">Integer</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> &gt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> arrayList;</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      private List</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">Teacher</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> &gt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> teacherList;</span></font></font></div><br></div><div><span style="color: rgb(134, 0, 164); font-family: 'Courier New'; font-size: 13px;">      private Teacher teacher;</span></div><div><span style="color: rgb(134, 0, 164); font-family: 'Courier New'; font-size: 13px;"><br></span></div></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public Integer getId() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            return id;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public void setId(Integer id) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            this.id = id;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public String getUname() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            return uname;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public void setUname(String uname) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            this.uname = uname;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public Integer[] getArrayInt() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            return arrayInt;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public void setArrayInt(Integer[] arrayInt) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            this.arrayInt = arrayInt;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      public List</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">Integer</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">getArrayList() {</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            return arrayList;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      public void setArrayList(List</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">Integer</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">arrayList) {</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            this.arrayList = arrayList;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public Teacher getTeacher() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            return teacher;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public void setTeacher(Teacher teacher) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            this.teacher = teacher;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><br></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      public List</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">Teacher</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">getTeacherList() {</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            return teacherList;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      public void setTeacherList(List</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&lt;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">Teacher</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">teacherList) {</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            this.teacherList = teacherList;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><br></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public String ajax(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            //ServletActionContext.getResponse().setStatus(500);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            int a = 1/0;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            return SUCCESS;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      public String testPost(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            //int a = 1/0;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            return SUCCESS;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><font color="#E30000">执行结果：</font></div></div><div align="left"><img src="JavaScript补充_files/Image [6].png" type="image/png" height="183" style="cursor: default;cursor: default;cursor: default;cursor: default;" width="742"/></div><div align="left"><font color="#E30000">注：$.ajax是ajax请求的企业级处理</font></div><div align="left"><font color="#E30000">     可以传递简单的json对象</font></div><div align="left"><font color="#E30000">     可以用$.ajax传递复杂格式的对象</font></div><div align="left"><font color="#E30000">     * 把struts2与json插件提供的拦截器导入到项目中来。</font></div><div align="left"><font color="#E30000">     * js端必须调用$.ajax提交请求，json格式必须是最标准的字符串的形式，可以利用$.toJSON来进行转化。</font></div><div align="left"><br></div><div align="left"><font color="#1C3387"><b>3、异常处理</b></font></div><div align="left"><img src="JavaScript补充_files/Image [7].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left"><font color="#8600A4"> </font> <font color="#E30000"> * 在ajax的请求过程中，如果后台是servlet，如果后台报错，servlet内部会设置状态码，这个时候，会触发ajax的onreadystatechange函数，js的客户端就会得到该值，js的客户端会知道，后台出错了。</font></div><div align="left"><font color="#E30000">   * 但是struts2框架会跳转到错误模板页面，对于状态码并没有进行设置。 </font></div><div align="left"><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">public String ajax(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      ServletActionContext.getResponse().setStatus(500);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      int a = 1/0;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      return SUCCESS;</span></font></div><div align="left"><span style="font-size: 10pt; color: rgb(134, 0, 164); font-family: 'Courier New';">}</span></div></div><div align="left"><font color="#E30000"><br></font></div><div align="left"><div><span style="color: rgb(227, 0, 0);">执行结果：</span></div><div><img src="JavaScript补充_files/Image [8].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><br></div></div></div></div></div></div></div>
</div>
<hr>
<a name="2283"/>
<h1>08 Struts2的缺点</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#E30000">1、整个的核心流程写死了，向动态的添加内容那是不可能的。</font><div><font color="#E30000">2、struts2的错误处理</font></div><div><font color="#E30000">     action—&gt;throws—&gt;defaultActionInvocation.invoke—&gt;throws—&gt;StrutsActionProxy.execute—&gt;throws—&gt;Dispatcher.servi eAction</font></div><div><font color="#E30000">     try{</font></div><div><font color="#E30000">     }catch(ConfigurationException e){</font></div><div><font color="#E30000">          sendError(request,rsponse.context,HttpServletResponse.SC_NOT_FOUND,e);</font></div><div><font color="#E30000">     }</font></div><div><font color="#E30000">     sendError(request,response,context.HttpServletResponse.SC_INTERNAL_SERVER_ERROR,e);</font></div><div><font color="#E30000">   这样的错误处理意味着：在action的每一个方法中都要try…catch，在架构中不是一个聪明的做法。</font></div><div><font color="#E30000">3、ajax与struts2整合的时候，对于错误处理，在struts2的内部没有设置状态码。</font></div><div><br></div></div>
</div>
<hr>
<a name="2284"/>
<h1>09 全局错误处理</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#E30000">1、ajax</font><div><font color="#E30000">   * 在js端的事情</font></div><div><font color="#E30000">     * 发出请求</font></div><div><font color="#E30000">       * $.post</font></div><div><font color="#E30000">       * 写法比较简单，利于操作</font></div><div><font color="#E30000">       * 在$.post方法的对调函数中，参数data</font></div><div><font color="#E30000">         * 如果服务器端不出错，则返回的是一个json对象的形式</font></div><div><font color="#E30000">         * 如果服务器端出错，则返回的是错误的模板页面（因为struts2内部没有设置状态码）</font></div><div><font color="#E30000">       * $.ajax</font></div><div><font color="#E30000">         * 写法比较复杂</font></div><div><font color="#E30000">         * 能处理复杂格式的数据</font></div><div><font color="#E30000">           * 必须把处理复杂格式的拦截器引入进来“json”</font></div><div><font color="#E30000">           * 这个方法本身设置contentType:&quot;application/json&quot;</font></div><div><font color="#E30000">           * 必须使用标准的json字符串来传递</font></div><div><font color="#E30000">   * 在后台的事情</font></div><div><font color="#E30000">     * 必须在action中写属性，属性并且有get方法，才能够回调到客户端。</font></div><div><font color="#E30000">     * 如果在action中的方法中产生错误，在客户端使用的是$.ajax请求，在action中的方法中设置状态码，才能在$.ajax的error方法中输出</font></div><div><font color="#E30000">     * 统一的错误处理和拦截器冲突了，只能选择其一，但是只要把开发者模式去掉，就可以了。</font></div><div><font color="#E30000">     * 在js端传递数据的时候，要保证key值和action中的属性值一致。</font></div><div><br></div><div><span style="color: rgb(227, 0, 0);">ErrorProcessor.java</span></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">@</span></font><font face="Courier New" size="2"><span style="font-size:10pt">SuppressWarnings(</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;serial&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">)</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ErrorProcessor</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>extends</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ActionSupport {</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String error;</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String getError() {</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">error;</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setError(String error) {</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.error = error;</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><br></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>private</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Exception exception;</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      </span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Exception getException() {</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">exception;</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>void</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">setException(Exception exception) {</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>this</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">.exception = exception;</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><br></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">@</span></font><font face="Courier New" size="2"><span style="font-size:10pt">Override</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>public</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">String execute(){</span></font></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> //<font face="Courier New" size="2"><span style="font-size:10pt">设置状态码</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2">             //此时ajaxAction中的状态码就不用再设置了</font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">//ServletActionContext.getResponse().setStatus(500);</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            this.error = this.getException().getMessage();</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">            return SUCCESS;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size:10pt">}</span></font></div><div align="left"><font color="#010101" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div><font color="#E30000">struts.xml </font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">&lt;?xml version=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;1.0&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">encoding=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;UTF-8&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">?&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">&lt;!DOCTYPE struts PUBLIC</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;-//Apache Software Foundation//DTD Struts Configuration 2.1.7//EN&quot;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      </span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;http://struts.apache.org/dtds/struts-2.1.7.dtd&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">&lt;struts&gt;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      &lt;!-- 配置文件改了以后不用重新启动 --&gt;</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      &lt;constant name=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;struts.devMode&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">value=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;true&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      &lt;constant name=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;struts.ui.theme&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">value=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;simple&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      &lt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>package</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">name=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;ajax&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">namespace=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;/&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>extends</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;json-default&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            &lt;!--</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">                  该拦截器是处理复杂格式的数据</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">             --&gt;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            &lt;interceptors&gt;</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                  &lt;interceptor-stack name=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;ajaxStack&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                        &lt;interceptor-ref name=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;json&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/interceptor-ref&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                        &lt;interceptor-ref name=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;defaultStack&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/interceptor-ref&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">                  &lt;/interceptor-stack&gt;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            &lt;/interceptors&gt;</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            &lt;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>default</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">-interceptor-ref name=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;ajaxStack&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/</span></font><font face="Courier New" size="2"><span style="font-size:10pt"><b>default</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">-interceptor-ref&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            &lt;global-results&gt;</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                  &lt;result name=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;errHandler&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">type=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;chain&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                        &lt;param name=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;actionName&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;errorProcessor&lt;/param&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">                  &lt;/result&gt;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            &lt;/global-results&gt;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            &lt;global-exception-mappings&gt;</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                  &lt;exception-mapping exception=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;java.lang.Exception&quot;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                        result=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;errHandler&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">/&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            &lt;/global-exception-mappings&gt;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            &lt;action name=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;errorProcessor&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cn.itheima02.struts2.ajax.error.ErrorProcessor&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                  &lt;result type=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;json&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/result&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            &lt;/action&gt;</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            </span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">            &lt;action name=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;ajaxAction_*&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">method=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;{1}&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>class</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">=</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&quot;cn.itheima02.struts2.ajax.action.AjaxAction&quot;</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                  &lt;result type=</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">&quot;json&quot;</span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;&lt;/result&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            &lt;/action&gt;</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">      &lt;/</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>package</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">&gt;</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">&lt;/struts&gt;   </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div align="left"><div><span style="color: rgb(227, 0, 0); text-align: -webkit-auto;">执行结果：</span></div></div><div align="left"><img src="JavaScript补充_files/Image [9].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left"><br></div><div align="left"><font color="#E30000">AjaxAction.java</font></div><div align="left"><div align="left"><div><font color="#E30000">AjaxAction.java </font><font color="#6A0081">  </font></div></div><div align="left"><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">public class AjaxAction extends ActionSupport{</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      private Integer id;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      private String uname;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><br></font></div><div align="left"><div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      private Integer[] arrayInt;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      private List</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">Integer</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> &gt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> arrayList;</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      private List</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"> <span style="font-size: 10pt;">Teacher</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> &gt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;"> teacherList;</span></font></font></div><br></div><div><span style="color: rgb(134, 0, 164); font-family: 'Courier New'; font-size: 13px;">      private Teacher teacher;</span></div><div><span style="color: rgb(134, 0, 164); font-family: 'Courier New'; font-size: 13px;"><br></span></div></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public Integer getId() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return id;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public void setId(Integer id) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            this.id = id;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public String getUname() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return uname;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public void setUname(String uname) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            this.uname = uname;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public Integer[] getArrayInt() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return arrayInt;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public void setArrayInt(Integer[] arrayInt) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            this.arrayInt = arrayInt;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      public List</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">Integer</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">getArrayList() {</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return arrayList;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      public void setArrayList(List</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">Integer</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">arrayList) {</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            this.arrayList = arrayList;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public Teacher getTeacher() {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return teacher;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public void setTeacher(Teacher teacher) {</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            this.teacher = teacher;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><br></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      public List</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">Teacher</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">getTeacherList() {</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return teacherList;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font color="#8600A4"><font face="Courier New" size="2"><span style="font-size: 10pt;">      public void setTeacherList(List</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">&lt;</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">Teacher</span></font><font face="Courier New" size="2"><span style="font-size: 10pt;">&gt;</span></font> <font face="Courier New" size="2"><span style="font-size: 10pt;">teacherList) {</span></font></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            this.teacherList = teacherList;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><br></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      public String ajax(){</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            //ServletActionContext.getResponse().setStatus(500);</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            int a = 1/0;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">            return SUCCESS;</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      public String testPost(){</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">            int a = 1/0;</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">            return SUCCESS;</span></font></div><div align="left"><font color="#328712" face="Courier New" size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left"><font color="#8600A4" face="Courier New" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><div align="left"><div><span style="color: rgb(227, 0, 0);">ajax-plugin.js</span></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">(function($){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      $.heimaPost = function(ajaxJSON){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            $.post(ajaxJSON.url,ajaxJSON.data,function(data){</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                  </span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">(data.error){</span></font><font face="Courier New" size="2"><span style="font-size:10pt">//后台出现错误</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">                        alert(data.error);</span></font></div><div align="left"><font color="#6A0081"><font face="Courier New" size="2"><span style="font-size:10pt">                  }</span></font> <font face="Courier New" size="2"><span style="font-size:10pt"><b>else</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">{</span></font></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">                        ajaxJSON.callback(data);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">                  }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">            });</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">      }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size:10pt">})($);</span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br></span></font></div><div><span style="color: rgb(227, 0, 0);">ajax.js</span></div></div><div align="left"><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">$().ready(function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">    $(&quot;input[type='button']&quot;).</span> <span style="font-size: 10pt;">unbind</span><span style="font-size: 10pt;">(&quot;click&quot;);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">    $(&quot;input[type='button']&quot;).bind(&quot;click&quot;, function(){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">//      $.post(&quot;ajaxAction_testPost.action&quot;,{</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">//          </span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">//      },function(data){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">//          if(data.error){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">//                      alert(data.error);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">//                }else{</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">//                      //成功的时候写的内容</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">//                }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">//      });</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">            $.heimaPost({</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">                  </span> <span style="font-size: 10pt;">url</span><span style="font-size: 10pt;">:'ajaxAction_tesPost.action',</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">                  data:null,</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">                  callback:function(data){</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">                        alert(&quot;</span> <span style="font-size: 10pt;">aaaa</span><span style="font-size: 10pt;">&quot;);</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">                  }</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">            });</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">    });</span></font></div><div align="left"><font color="#6A0081" face="Courier New" size="2"><span style="font-size: 10pt;">});</span></font></div></div></div></div></div></div>
</div></body></html> 