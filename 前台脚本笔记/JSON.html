<html>
<head>
  <title>Evernote Export</title>
  <basefont face="楷体" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: 楷体;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="1709"/>
<h1>1 JSON概念</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#E30000">1、<span style="text-indent: -21pt;">JSON数据格式</span></font><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">   * JSON</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">（</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">JavaScript Object Notation</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">）一种简单的数据格式，比</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">xml</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">更轻巧。</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">JSON</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">是</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">JavaScript</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">原生格式</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">，这意味着在</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">JavaScript</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">中处理</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">JSON</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">数据不需要任何特殊的</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">API</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">或工具包。 </span></div><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">   * JSON</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">的规则很简单：对象是一个无序的</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">“‘</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">名称</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">/</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">值</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">’</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">对</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">”</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">集合。一个对象以</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">“</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">{</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">”</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">（左括号）开始，</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">“</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">}</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">”</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">（右括号）结束。每个</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">“</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">名称</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">”</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">后跟一个</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">“</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">:</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">”</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">（冒号）；</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">“‘</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">名称</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">/</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">值</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">’</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">对</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">”</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">之间使用</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">“,”</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">（逗号）分隔。</span></div><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">     规则如下：</span></div><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">       1. </span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">映射用冒号（</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">“</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">：</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">”</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">）表示。名称</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">:</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">值。</span></div><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">       2. </span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">并列的数据之间用逗号（</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">“</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">，</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">”</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">）分隔。</span></div><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">       3. </span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">映射的集合（对象）用大括号（</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">“</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">{}</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">”</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">）表示。</span></div><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">       4. </span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">并列数据的集合（数组）用方括号</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">(</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">“</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">[]</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">”</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">)</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">表示。</span></div><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">       5. </span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">元素值可具有的类型：</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">string, number, object, array, true, false, null</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">。 </span></div><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">   * 解析</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">JSON</span><p style="margin-left:63.0000pt; text-indent:-21.0000pt; margin-bottom:0pt; margin-top:0pt;"><font color="#E30000">JSON 只是一种文本字符串。它被存储在responseText属性中</font></p><p style="margin-left:63.0000pt; text-indent:-21.0000pt; margin-bottom:0pt; margin-top:0pt;"><font color="#E30000">为了读取存储在responseText属性中的 JSON 数据，需要根据JavaScript的eval语句。</font></p><div><font color="#E30000">函数<font>eval</font><font>会把一个字符串当作它的参数。然后这个字符串会被当作</font><font>JavaScript</font><font>代码来执行。因为</font><font>JSON</font><font>的字符串就是由</font><font>JavaScript</font><font>代码构成的，所以它本身是可执行的。</font></font></div></div><div><font color="#E30000"><font><br></font></font></div><div><font color="#E30000"><font>Demo1</font></font></div><div><img src="JSON_files/Image.png" type="image/png" style="cursor: default;"/></div><div><br></div><div><font color="#E30000"><font>Demo2</font></font></div><div><img src="JSON_files/Image [1].png" type="image/png" style="cursor: default;"/></div><div><br></div><div><font color="#E30000"><font>Demo3</font></font></div><div><img src="JSON_files/Image [2].png" type="image/png" style="cursor: default;"/></div><div><br></div><div><font color="#E30000"><font>Demo4</font></font></div><div><img src="JSON_files/Image [3].png" type="image/png" style="cursor: default;"/></div><div><img src="JSON_files/Image [4].png" type="image/png" style="cursor: default;"/></div><div><br></div><div><font color="#E30000">Demo5</font></div><div><img src="JSON_files/Image [5].png" type="image/png" style="cursor: default;"/></div><div><img src="JSON_files/Image [6].png" type="image/png" style="cursor: default;"/></div><div><img src="JSON_files/Image [7].png" type="image/png" style="cursor: default;"/></div><div><img src="JSON_files/Image [8].png" type="image/png" style="cursor: default;"/></div><div><span style="color: rgb(227, 0, 0);">注：json的值可以是双引号括起来的字符串、数值、true、false、null、对象或者数组。这些结构可以嵌套。</span></div></div>
</div>
<hr>
<a name="1189"/>
<h1>2 JSON-lib</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div><font color="#E30000">&lt;1&gt;JSON-lib 是一个java类库</font></div><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">   * 转换</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">javabeans,maps,collections,java arrays</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">和</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">XML</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">成为</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">json</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">格式数据 </span></div><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">     转换</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">json</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">格式数据成为</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">javabeans </span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">对象</span></div><div><span style="color: rgb(227, 0, 0); text-indent: -21pt;">   * 需要</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">jar</span><span style="color: rgb(227, 0, 0); text-indent: -21pt;">包</span></div><p style="margin-left:63.0000pt; text-indent:-21.0000pt; margin-bottom:0pt; margin-top:0pt;"><font color="#E30000">jakarta commons-lang 2.5 </font></p><p style="margin-left:63.0000pt; text-indent:-21.0000pt; margin-bottom:0pt; margin-top:0pt;"><font color="#E30000">jakarta commons-beanutils 1.8.0 </font></p><p style="margin-left:63.0000pt; text-indent:-21.0000pt; margin-bottom:0pt; margin-top:0pt;"><font color="#E30000">jakarta commons-collections 3.2.1 </font></p><p style="margin-left:63.0000pt; text-indent:-21.0000pt; margin-bottom:0pt; margin-top:0pt;"><font color="#E30000">jakarta commons-logging 1.1.1 </font></p><div><font color="#E30000">       ezmorph 1.0.6</font></div><div><font color="#E30000"> 注：Google的GSON和JSON-lib的功能基本上是一致的。</font></div><div><font color="#E30000">json06.html</font><div style="font-size: 13px;"><font color="#8600A4" face="Courier New">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
  &lt;head&gt;<br>
    &lt;title&gt;form.html&lt;/title&gt;<br>
    &lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt;<br>
    &lt;meta http-equiv=&quot;description&quot; content=&quot;this is my page&quot;&gt;<br>
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;<br>
  &lt;/head&gt;<br>
  &lt;body&gt;<br>
         &lt;select id=&quot;province&quot; name=&quot;province&quot;&gt;<br>
       &lt;option value=&quot;&quot;&gt;请选择....&lt;/option&gt;<br>
     &lt;/select&gt;<br>
     &lt;select id=&quot;city&quot; name=&quot;city&quot;&gt;<br>
          &lt;option value=&quot;&quot;&gt;请选择.....&lt;/option&gt;<br>
     &lt;/select&gt;<br>
  &lt;/body&gt;<br>
  &lt;script language=&quot;JavaScript&quot;&gt;<br>
            window.onload = function(){<br>
               var xhr = createXmlHttpRequest();<br>
              <br>
               xhr.onreadystatechange = function(){<br>
                    if(xhr.readyState==4){<br>
                         if(xhr.status==200){<br>
                              var data = xhr.responseText;<br>
                             <br>
                              alert(data);<br>
                             <br>
                              /*<br>
                              * ajax模型中，使用eval()函数将接收到的文本内容转换成json数据格式<br>
                              *      * 利用&quot;()&quot;将要转换的内容包装，eval()函数会强行将其转换成json数据格式<br>
                              *      * 不用&quot;()&quot;将要转换的内容包装，eval()函数会将&quot;{}&quot;解释为空的语句块<br>
                              */<br>
                              var json = eval(&quot;(&quot;+data+&quot;)&quot;);<br>
                             <br>
                              for(var i=0;i&lt;json.length;i++){<br>
                                   var provinceValue = json[i].province;<br>
                              }<br>
                         }<br>
                    }<br>
               }<br>
              <br>
               xhr.open(&quot;get&quot;,&quot;../jsonServlet&quot;,true);<br>
              <br>
               xhr.send(null);<br>
          }<br><br>
          function createXmlHttpRequest(){<br>
               var xmlHttp;<br>
               try{    //Firefox, Opera 8.0+, Safari<br>
                    xmlHttp=new XMLHttpRequest();<br>
               }catch (e){<br>
                    try{    //Internet Explorer<br>
                         xmlHttp=new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);<br>
                    }catch (e){<br>
                         try{<br>
                              xmlHttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);<br>
                         }catch (e){} <br>
                    }<br>
               }<br>
               return xmlHttp;<br>
          }<br>
         <br>
  &lt;/script&gt;<br>
&lt;/html&gt;</font></div><div><br><div><font color="#E30000">JsonServlet.java</font></div><div align="left"><font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>class</b></span></font> <font size="2"><span style="font-size: 10pt;">JsonServlet</span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>extends</b></span></font> <font size="2"><span style="font-size: 10pt;">HttpServlet {</span></font></div><div align="left"><font color="#010101" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>void</b></span></font> <font size="2"><span style="font-size: 10pt;">doGet(HttpServletRequest request, HttpServletResponse response)</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">                  </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>throws</b></span></font> <font size="2"><span style="font-size: 10pt;">ServletException, IOException {</span></font></div><div align="left"><font color="#010101" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            response.setContentType(</span></font> <font color="#2A00FF" size="2"><span style="font-size: 10pt;">&quot;text/html;charset=utf-8&quot;</span></font><font size="2"><span style="font-size: 10pt;">);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            PrintWriter</span> <span style="font-size: 10pt; background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">out</span> <span style="font-size: 10pt;">= response.getWriter();</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font color="#3F7F5F" size="2"><span style="font-size: 10pt;">//          String json = &quot;[{'province':'吉林省'},{'province':'辽宁省'},{'province':'山东省'}]&quot;;</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font> <font color="#3F7F5F" size="2"><span style="font-size: 10pt;">//模拟查询数据库</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            List&lt;Province&gt; list =</span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>new</b></span></font> <font size="2"><span style="font-size: 10pt;">ArrayList&lt;Province&gt;();</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            Province p1 =</span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>new</b></span></font> <font size="2"><span style="font-size: 10pt;">Province(1,</span></font> <font color="#2A00FF" size="2"><span style="font-size: 10pt;">&quot;吉林省&quot;</span></font> <font size="2"><span style="font-size: 10pt;">);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            Province p2 =</span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>new</b></span></font> <font size="2"><span style="font-size: 10pt;">Province(1,</span></font> <font color="#2A00FF" size="2"><span style="font-size: 10pt;">&quot;辽宁省&quot;</span></font> <font size="2"><span style="font-size: 10pt;">);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            Province p3 =</span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>new</b></span></font> <font size="2"><span style="font-size: 10pt;">Province(1,</span></font> <font color="#2A00FF" size="2"><span style="font-size: 10pt;">&quot;山东省&quot;</span></font> <font size="2"><span style="font-size: 10pt;">);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            list.add(p1);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            list.add(p2);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            list.add(p3);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            JSONArray json = JSONArray.</span> <span style="font-size: 10pt;"><i>fromObject</i></span><span style="font-size: 10pt;">(list);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span> <span style="font-size: 10pt; background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">out</span><span style="font-size: 10pt;">.println(json.toString());</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#010101" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>void</b></span></font> <font size="2"><span style="font-size: 10pt;">doPost(HttpServletRequest request, HttpServletResponse response)</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">                  </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>throws</b></span></font> <font size="2"><span style="font-size: 10pt;">ServletException, IOException {</span></font></div><div align="left"><font color="#010101" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            response.setContentType(</span></font> <font color="#2A00FF" size="2"><span style="font-size: 10pt;">&quot;text/html&quot;</span></font><font size="2"><span style="font-size: 10pt;">);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            PrintWriter out = response.getWriter();</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            doGet(request, response);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font color="#010101" size="2"><span style="font-size: 10pt;"><br></span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">}</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;"><br></span></font></div><div><font color="#E30000">JsonUtil.java</font></div></div><div align="left"><font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>class</b></span></font> <font size="2"><span style="font-size: 10pt;">JsonUtil {</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">/**</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">将数组转换成String类型的JSON数据格式</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@param</b></span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">objects</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@return</b></span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*/</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>static</b></span></font> <font size="2"><span style="font-size: 10pt;">String array2json(Object[] objects){</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            JSONArray jsonArray = JSONArray.</span> <span style="font-size: 10pt;"><i>fromObject</i></span><span style="font-size: 10pt;">(objects);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>return</b></span></font> <font size="2"><span style="font-size: 10pt;">jsonArray.toString();</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">/**</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">将list集合转换成String类型的JSON数据格式</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@param</b></span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">list</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@return</b></span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*/</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>static</b></span></font> <font size="2"><span style="font-size: 10pt;">String list2json(List list){</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            JSONArray jsonArray = JSONArray.</span> <span style="font-size: 10pt;"><i>fromObject</i></span><span style="font-size: 10pt;">(list);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>return</b></span></font> <font size="2"><span style="font-size: 10pt;">jsonArray.toString();</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">/**</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">将map集合转换成String类型的JSON数据格式</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@param</b></span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">map</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@return</b></span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*/</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>static</b></span></font> <font size="2"><span style="font-size: 10pt;">String map2json(Map map){</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            JSONObject jsonObject = JSONObject.</span> <span style="font-size: 10pt;"><i>fromObject</i></span><span style="font-size: 10pt;">(map);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>return</b></span></font> <font size="2"><span style="font-size: 10pt;">jsonObject.toString();</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">/**</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">将Object对象转换成String类型的JSON数据格式</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@param</b></span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">object</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@return</b></span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*/</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>static</b></span></font> <font size="2"><span style="font-size: 10pt;">String object2json(Object object){</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            JSONObject jsonObject = JSONObject.</span> <span style="font-size: 10pt;"><i>fromObject</i></span><span style="font-size: 10pt;">(object);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>return</b></span></font> <font size="2"><span style="font-size: 10pt;">jsonObject.toString();</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">/**</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">将XML数据格式转换成String类型的JSON数据格式</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@param</b></span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">xml</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@return</b></span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*/</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>static</b></span></font> <font size="2"><span style="font-size: 10pt;">String xml2json(String xml){</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            JSONArray jsonArray = (JSONArray)</span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>new</b></span></font> <font size="2"><span style="font-size: 10pt;">XMLSerializer().read(xml);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>return</b></span></font> <font size="2"><span style="font-size: 10pt;">jsonArray.toString();</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">/**</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">       </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">除去不想生成的字段（特别适合去掉级联的对象）</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">       </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">       </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@param</b></span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">excludes</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">       </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*</span></font> <font color="#7F9FBF" size="2"><span style="font-size: 10pt;"><b>@return</b></span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#3F5FBF" size="2"><span style="font-size: 10pt;">*/</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>public</b></span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>static</b></span></font> <font size="2"><span style="font-size: 10pt;">JsonConfig configJson(String[] excludes) {</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            JsonConfig jsonConfig =</span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>new</b></span></font> <font size="2"><span style="font-size: 10pt;">JsonConfig();</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            jsonConfig.setExcludes(excludes);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            jsonConfig.setIgnoreDefaultExcludes(</span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>true</b></span></font><font size="2"><span style="font-size: 10pt;">);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            jsonConfig.setCycleDetectionStrategy(CycleDetectionStrategy.</span></font> <font color="#0000C0" size="2"><span style="font-size: 10pt;"><i>LENIENT</i></span></font><font size="2"><span style="font-size: 10pt;">);</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">            </span></font> <font color="#7F0055" size="2"><span style="font-size: 10pt;"><b>return</b></span></font> <font size="2"><span style="font-size: 10pt;">jsonConfig;</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      }</span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">      </span></font></div><div align="left"><font size="2"><span style="font-size: 10pt;">}</span></font></div></div></div>
</div></body></html> 